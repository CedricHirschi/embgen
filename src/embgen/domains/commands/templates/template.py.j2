{# Jinja2 template for commands code generation #}
"""
{{ name }} - Auto-generated command definitions.

Do not edit manually. Generated by embgen.
"""

from dataclasses import dataclass, field
from enum import Enum as BaseEnum

from commands_base import Command


# ============================================================================

class {{ name }}:
    """Command map containing all available commands."""
{% for command in commands %}
{% for arg in command.args %}
{% if arg.enums %}

    class Enum{{ arg.name|capitalize }}(BaseEnum):
        """Enum for argument {{ arg.name|upper }} in command {{ command.name|upper }}"""
{% for enum in arg.enums %}
        {{ enum.name }} = {{ enum.value }}
{% endfor %}
{% endif %}
{% endfor %}
{% endfor %}

# ============================================================================
{% for command in commands %}

@dataclass
class Command{{ command.name|capitalize }}(Command):
    """Command {{ command.name|upper }}

    {{ command.description or '' }}

    Args:
{% for arg in command.args %}
        {{ arg.name }} ({{ arg.type_python }}): {{ arg.description }}{% if arg.default != None %} (default: {{ arg.default }}){% endif %}

{% endfor %}
    """

    _id: int = field(default={{ command.id }}, init=False)
    _description: str = field(default="{{ command.description or '' }}", init=False)
    _format: str = field(default="{% for arg in command.args %}{{ arg.type }}{% endfor %}", init=False)
{% for arg in command.args %}
{% if arg.enums %}
    {{ arg.name|lower }}: {{ name }}.Enum{{ arg.name|capitalize }}{% if arg.default != None %} = field(default={{ name }}.Enum{{ arg.name|capitalize }}.{{ arg.default.name if arg.default is defined and arg.default.name is defined else arg.default }}){% endif %}

{% else %}
    {{ arg.name|lower }}: {{ arg.type_python }}{% if arg.default != None %} = field(default={{ arg.default }}){% endif %}

{% endif %}
{% endfor %}
{% endfor %}
