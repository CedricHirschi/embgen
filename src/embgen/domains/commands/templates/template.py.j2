{# Jinja2 template for commands code generation #}
"""
{{ name }} - Auto-generated command definitions.

This file is auto-generated by embgen. Do not edit manually.
"""

from dataclasses import dataclass
from enum import Enum as BaseEnum
from typing import ClassVar

from .commands_base import Command

{% for command in commands %}

@dataclass
class Command{{ command.name|capitalize }}(Command):
    """Command {{ command.name|upper }}

    {{ command.description or '' }}

    Args:
{% for arg in command.args %}
{% if arg.enums %}
        {{ arg.name }} (Enum{{ arg.name|capitalize }}): {{ arg.description }}{% if arg.default != None %} (default: Enum{{ arg.name|capitalize }}.{{ arg.default.name if arg.default is defined and arg.default.name is defined else arg.default }}){% endif %}
{% else %}
        {{ arg.name }} ({{ arg.type_python }}): {{ arg.description }}{% if arg.default != None %} (default: {{ arg.default }}){% endif %}
{% endif %}

{% endfor %}
    """
{% for arg in command.args %}
{% if arg.enums %}

    class Enum{{ arg.name|capitalize }}(BaseEnum):
        """Enum for argument {{ arg.name|upper }}"""
{% for enum in arg.enums %}
        {{ enum.name }} = {{ enum.value }}
{% endfor %}
{% endif %}
{% endfor %}

    _id: ClassVar[int] = {{ command.id }}
    _description: ClassVar[str] = "{{ command.description or '' }}"
    _format: ClassVar[str] = "{% for arg in command.args %}{{ arg.type }}{% endfor %}"

{% for arg in command.args %}
{% if arg.enums %}
    {{ arg.name|lower }}: Enum{{ arg.name|capitalize }}{% if arg.default != None %} = Enum{{ arg.name|capitalize }}.{{ arg.default.name if arg.default is defined and arg.default.name is defined else arg.default }}{% endif %}

{% else %}
    {{ arg.name|lower }}: {{ arg.type_python }}{% if arg.default != None %} = {{ arg.default }}{% endif %}

{% endif %}
{% endfor %}
{% endfor %}
